# Common Nginx settings for static SPA hosting
# Include in each server {} block with: include /etc/nginx/snippets/asafarim/common.conf;

index index.html;

# Let SPA handle client-side routes
location / {
  try_files $uri $uri/ /index.html;
}

# Basic security headers
add_header X-Content-Type-Options nosniff;
add_header X-Frame-Options SAMEORIGIN;
add_header Referrer-Policy no-referrer-when-downgrade;
add_header X-XSS-Protection "1; mode=block";
add_header Content-Security-Policy "default-src 'self' 'unsafe-inline' 'unsafe-eval' data: https: http:;";

# Compression
gzip on;
gzip_comp_level 5;
gzip_min_length 256;
gzip_proxied any;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;
