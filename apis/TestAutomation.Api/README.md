TestAutomation.Api

Environment variables / appsettings.json:

- ConnectionStrings:DefaultConnection = postgres connection string
- IdentityApi:BaseUrl = <https://identity.asafarim.be>
- IdentityApi:JwtSecret = shared JWT signing secret (if symmetric). Prefer JWKS/OIDC in production
- IdentityApi:Issuer = IdentityApi
- IdentityApi:Audience = TestAutomationClient
- TestRunner:BaseUrl = <http://localhost:4000>
- TestRunner:ApiKey = shared secret for runner
- ApiBaseUrl = <http://localhost:5200>

Local run steps:

1) Ensure PostgreSQL is running and connection string is valid
2) dotnet run --project apis/TestAutomation.Api/TestAutomation.Api.csproj --urls <http://localhost:5200>
3) In another terminal, start Node runner:
   cd apis/TestRunner
   pnpm i && pnpm dev
   Set env: API_URL=<http://localhost:5200>, API_KEY=..., API_TOKEN=<JWT from identity-portal>

SSO Integration:

- This API expects Authorization: Bearer <token> generated by Identity.Api via identity-portal
- Roles are enforced via [Authorize(Policy = "TesterOnly")] or [Authorize]; roles must be managed in Identity portal.

SignalR:

- Hub: /hubs/testrun
- Clients join group by run id and receive TestUpdate messages
